@PACKAGE_INIT@

SET(LIB_NAME "mlib")

# Get the latest abbreviated commit hash of the working branch
FILE(STRINGS "@CMAKE_INSTALL_PREFIX@/${LIB_NAME}/VERSION" MYLIB_VERSION)

STRING(REGEX REPLACE "Version ............" " " MYLIB_VERSION "${MYLIB_VERSION}")
string(REPLACE "\n" ";" MYLIB_VERSION ${MYLIB_VERSION})
string(REPLACE "Commit" ";" MYLIB_VERSION ${MYLIB_VERSION})
list (GET MYLIB_VERSION 0 MYLIB_VERSION)
# set(MYLIB_VERSION 0.0.0)

set (MYLIB_ROOT_DIR @CMAKE_INSTALL_PREFIX@/${LIB_NAME})

FIND_LIBRARY(MYLIB_LIBRARY _${LIB_NAME}
    PATHS ${MYLIB_ROOT_DIR}/lib
    NO_DEFAULT_PATH
)
SET(MYLIB_LIBRARIES ${MYLIB_LIBRARY})

FIND_PATH(MYLIB_INCLUDE_DIR ${LIB_NAME}/math/point.h
    PATHS ${MYLIB_ROOT_DIR}/include
    NO_DEFAULT_PATH
)
SET(MYLIB_INCLUDE_DIRS ${MYLIB_INCLUDE_DIR})

INCLUDE(FindPackageHandleStandardArgs)
FIND_PACKAGE_HANDLE_STANDARD_ARGS(${LIB_NAME}  DEFAULT_MSG
                                  MYLIB_INCLUDE_DIRS MYLIB_INCLUDE_DIR)

IF (NOT MYLIB_FOUND)
    MESSAGE(FATAL_ERROR "Package ${LIB_NAME} not found")
ELSE (NOT MYLIB_FOUND)
    MESSAGE(STATUS "${LIB_NAME} configuration - version ${MYLIB_VERSION}")
ENDIF (NOT MYLIB_FOUND)
